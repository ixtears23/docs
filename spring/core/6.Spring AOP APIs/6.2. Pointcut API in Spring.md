## 6.2. Pointcut API in Spring(Spring의 Pointcut API)

**Spring**이 **중요한 포인트 컷 개념**을 **어떻게 다루는 지** 살펴 보겠습니다.  

## 6.2.1. Concepts(개념)

**Spring의 포인트 컷 모델**은 조언 *유형과 상관없이* **pointcut 재사용을 가능**하게한다.  
**동일한 포인트 컷을 사용**하여 **다른 조언을 타겟팅** 할 수 있습니다.  
`org.springframework.aop.Pointcut` 인터페이스는  
**특정 클래스** 및 **메소드에 대한 조언**을 대상으로하는 데 사용되는 **중앙 인터페이스**입니다.  
전체 인터페이스는 다음과 같습니다.  
~~~java
public interface Pointcut {

    ClassFilter getClassFilter();

    MethodMatcher getMethodMatcher();

}
~~~
Pointcut 인터페이스를 두 부분으로 나누면  
**클래스**와 **메소드 매칭 부분을 재사용** 할 수 있고 **다른 메소드 매처**와 `union` 을 수행하는 것과 같이  
***세밀한 합성 작업을 수행 할 수 있습니다.***  
`ClassFilter` 인터페이스는 `Pointcut`을 **지정된 대상 클래스 집합으로 제한**하는 데 사용됩니다.  
`matches()` 메서드가 항상 **true를 반환**하면 **모든 대상 클래스가 일치**합니다.  
~~~java
public interface ClassFilter {

    boolean matches(Class clazz);
}
~~~

**`MethodMatcher` 인터페이스**는 일반적으로 더 **중요**합니다.  
전체 인터페이스는 다음과 같습니다.  
~~~java
public interface MethodMatcher {

    boolean matches(Method m, Class targetClass);

    boolean isRuntime();

    boolean matches(Method m, Class targetClass, Object[] args);
}
~~~
`matches(Method, Class)` 메서드는 이 `pointcut`이 **대상 클래스의 주어진 메소드**와 **일치하는지 여부를 테스트**하는데 사용 됩니다.  
이 평가는 **모든 메소드 호출에 대한 테스트의 필요성을 피하기 위해** ***AOP 프록시가 작성 될 때 수행 될 수 있습니다.***  
주어진 메소드에 대해 `2-argument matches` 메소드가 `true`를 리턴하고  
`MethodMatcher`의 `isRuntime()` 메소드가 `true`를 리턴하면 **모든 메소드 호출시** `3-argument matches` 메소드가 호출됩니다.  
이렇게 하면 **대상 조언이 실행되기 바로 전**에 ***메서드 호출에 전달 된 인수를 Pointcut에서 볼 수 있습니다.***  

대부분의 `MethodMatcher`는 **정적**입니다.  
즉, `isRuntime()` 메서드가 `false`를 반환한다는 것을 의미합니다.  
이 경우, `3-argument matches` 메소드는 **절대로 호출되지 않습니다.**  

---
가능한 경우 **AOP 프록시가 생성 될 때**  
AOP 프레임 워크가 **pointcut 평가 결과를 캐시 할 수 있도록** ***pointcuts를 정적으로 만드십시오.***

---
